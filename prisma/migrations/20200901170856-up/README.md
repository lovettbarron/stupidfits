# Migration `20200901170856-up`

This migration has been generated by Andrew Lovett-Barron at 9/1/2020, 7:08:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."users.username_unique"

CREATE UNIQUE INDEX "users.instagram_unique" ON "public"."users"("instagram")

CREATE INDEX "name" ON "public"."users"("name")

CREATE INDEX "instagram" ON "public"."users"("instagram")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200901115650-up..20200901170856-up
--- datamodel.dml
+++ datamodel.dml
@@ -3,26 +3,28 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id            Int       @default(autoincrement()) @id
-  username      String?   @unique
   email         String?   @unique
   name          String?
-  posts         Post[]
+  username      String?
   emailVerified DateTime? @map(name: "email_verified")
   image         String?
   createdAt     DateTime  @default(now()) @map(name: "created_at")
   updatedAt     DateTime  @default(now()) @map(name: "updated_at")
-  instagram     String?
+  posts         Post[]
+  instagram     String?   @unique
+  @@index([email], name: "email")
+  @@index([username], name: "username")
+  @@index([name], name: "name")
+  @@index([instagram], name: "instagram")
   @@map(name: "users")
-  @@index([email], name: "email")
-  @@index([username], name: "username")
 }
 model Account {
   id                 Int       @default(autoincrement()) @id
```


