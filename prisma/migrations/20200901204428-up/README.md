# Migration `20200901204428-up`

This migration has been generated by Andrew Lovett-Barron at 9/1/2020, 10:44:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Post" DROP CONSTRAINT "Post_authorId_fkey"

ALTER TABLE "public"."Fit" DROP CONSTRAINT "Fit_postId_fkey"

ALTER TABLE "public"."Fit" DROP COLUMN "postId",
ADD COLUMN "mediaId" integer   NOT NULL 

CREATE TABLE "public"."Media" (
"id" SERIAL,
"insta_id" integer   NOT NULL ,
"shortcode" text   NOT NULL ,
"timestamp" integer   NOT NULL ,
"image" text   NOT NULL ,
"url" text   NOT NULL ,
"description" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Fit" ADD FOREIGN KEY ("mediaId")REFERENCES "public"."Media"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."Post"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200901175038-up..20200901204428-up
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Account {
   id                 Int       @default(autoincrement()) @id
@@ -47,11 +47,11 @@
   image         String?
   createdAt     DateTime  @default(now()) @map(name: "created_at")
   updatedAt     DateTime  @default(now()) @map(name: "updated_at")
   username      String?
-  posts         Post[]
-  instagram     String?   @unique
+  instagram String? @unique
+
   @@map(name: "users")
 }
 model VerificationRequest {
@@ -64,20 +64,21 @@
   @@map(name: "verification_requests")
 }
-model Post {
-  id        Int     @default(autoincrement()) @id
-  author    User?   @relation(fields: [authorId], references: [id])
-  authorId  Int?
-  content   String?
-  published Boolean @default(false)
-  title     String?
+model Media {
+  id          Int    @default(autoincrement()) @id
+  insta_id    Int
+  shortcode   String
+  timestamp   Int
+  image       String
+  url         String
+  description String
 }
 model Fit {
   id         Int     @default(autoincrement()) @id
-  post       Post
+  media      Media
   photo      String?
   components Item[]  @relation("FitComponent")
   desc       String?
   temp       Item?
```


