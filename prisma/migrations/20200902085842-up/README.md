# Migration `20200902085842-up`

This migration has been generated by Andrew Lovett-Barron at 9/2/2020, 10:58:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Closet" ADD COLUMN "userId" integer   

ALTER TABLE "public"."Fit" ADD COLUMN "userId" integer   

ALTER TABLE "public"."Item" ADD COLUMN "userId" integer   

ALTER TABLE "public"."Closet" ADD FOREIGN KEY ("userId")REFERENCES "public"."users"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Fit" ADD FOREIGN KEY ("userId")REFERENCES "public"."users"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Item" ADD FOREIGN KEY ("userId")REFERENCES "public"."users"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200902084539-up..20200902085842-up
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Account {
   id                 Int       @default(autoincrement()) @id
@@ -47,11 +47,13 @@
   image         String?
   createdAt     DateTime  @default(now()) @map(name: "created_at")
   updatedAt     DateTime  @default(now()) @map(name: "updated_at")
   username      String?
+  fit           Fit[]     @relation("FitRelation")
+  item          Item[]    @relation("ItemRelation")
+  closet        Closet[]  @relation("ClosetRelation")
+  instagram     String?   @unique
-  instagram String? @unique
-
   @@map(name: "users")
 }
 model VerificationRequest {
@@ -81,15 +83,19 @@
   media      Media
   components Item[]  @relation("FitComponent")
   desc       String?
   temp       String?
+  user       User?   @relation("FitRelation", fields: [userId], references: [id])
+  userId     Int?
 }
 model Closet {
   id     Int    @default(autoincrement()) @id
   name   String
   grails Item[] @relation("ClosetGrails")
   items  Item[] @relation("ClosetContent")
+  user   User?  @relation("ClosetRelation", fields: [userId], references: [id])
+  userId Int?
 }
 model Brand {
   id   Int     @default(autoincrement()) @id
@@ -115,8 +121,10 @@
   closet   Closet?  @relation("ClosetContent", fields: [closetId], references: [id])
   closetId Int?
   fit      Fit?     @relation("FitComponent", fields: [fitId], references: [id])
   fitId    Int?
+  user     User?    @relation("ItemRelation", fields: [userId], references: [id])
+  userId   Int?
 }
 enum ItemType {
   BAG
```


