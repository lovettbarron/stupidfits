# Migration `20200903121819-up`

This migration has been generated by Andrew Lovett-Barron at 9/3/2020, 2:18:19 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Fit" DROP CONSTRAINT "Fit_mediaId_fkey"

ALTER TABLE "public"."Fit" DROP COLUMN "mediaId"

ALTER TABLE "public"."Media" ADD COLUMN "mediaId" integer   

CREATE UNIQUE INDEX "Media_mediaId_unique" ON "public"."Media"("mediaId")

ALTER TABLE "public"."Media" ADD FOREIGN KEY ("mediaId")REFERENCES "public"."Fit"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200902200206-up..20200903121819-up
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Account {
   id                 Int       @default(autoincrement()) @id
@@ -76,13 +76,15 @@
   timestamp   Int
   image       String
   url         String
   description String
+  fit         Fit?    @relation("MediaRelationship", fields: [mediaId], references: [id])
+  mediaId     Int?
 }
 model Fit {
   id         Int     @default(autoincrement()) @id
-  media      Media
+  media      Media   @relation("MediaRelationship")
   components Item[]  @relation("FitComponent")
   desc       String?
   temp       String?
   user       User?   @relation("FitRelation", fields: [userId], references: [id])
@@ -102,15 +104,16 @@
   id   Int     @default(autoincrement()) @id
   name String  @unique
   logo String?
   desc String?
+  Item Item[]
 }
 model Item {
   id       Int      @default(autoincrement()) @id
   type     ItemType
   photo    String?
-  brand    Brand
+  brand    Brand    @relation(fields: [brandId], references: [id])
   model    String
   year     Int?
   size     String?
   colour   Colour[]
@@ -122,8 +125,10 @@
   fit      Fit[]    @relation("FitComponent", fields: [fitId], references: [id])
   fitId    Int?
   user     User?    @relation("ItemRelation", fields: [userId], references: [id])
   userId   Int?
+  Closet   Closet?  @relation("ClosetGrails", fields: [closetId], references: [id])
+  brandId  Int
 }
 enum ItemType {
   BAG
```


