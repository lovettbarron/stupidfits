# Migration `20201130185740-up`

This migration has been generated by Andrew Lovett-Barron at 11/30/2020, 7:57:40 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Invite" ADD COLUMN     "seen" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "done" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "userId" INTEGER

CREATE UNIQUE INDEX "_memberGroup_AB_unique" ON "_memberGroup"("A", "B")

ALTER TABLE "Invite" ADD FOREIGN KEY("userId")REFERENCES "users"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201128230403-up..20201130185740-up
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -9,9 +9,9 @@
 }
 // datasource db {
 //   provider = "postgresql"
-//   url = "***"
+//   url = "***"
 // }
 model Account {
   id                 Int       @id @default(autoincrement())
@@ -85,8 +85,9 @@
   Battle       Battle[]
   BattleVote   BattleVote[]
   BattleJudge  Battle[]       @relation(name: "battleJudges")
   @@map(name: "users")
+  Invite Invite[]
 }
 model VerificationRequest {
   id         Int      @id @default(autoincrement())
@@ -270,12 +271,16 @@
 model Invite {
   id           String      @id @default(uuid())
   email        String?
+  user         User?       @relation(fields: [userId], references: [id])
+  seen         Boolean     @default(false)
+  done         Boolean     @default(false)
   collection   Collection? @relation("inviteCollection", fields: [collectionId], references: [id])
   group        Group?      @relation("inviteGroup", fields: [groupId], references: [id])
   collectionId Int?
   groupId      Int?
+  userId       Int?
 }
 model Collection {
   id          Int     @id @default(autoincrement())
```


