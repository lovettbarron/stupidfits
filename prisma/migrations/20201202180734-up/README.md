# Migration `20201202180734-up`

This migration has been generated by Andrew Lovett-Barron at 12/2/2020, 7:07:34 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "_BrandToGroup" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL
)

CREATE TABLE "_GroupToStyle" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL
)

CREATE UNIQUE INDEX "_BrandToGroup_AB_unique" ON "_BrandToGroup"("A", "B")

CREATE INDEX "_BrandToGroup_B_index" ON "_BrandToGroup"("B")

CREATE UNIQUE INDEX "_GroupToStyle_AB_unique" ON "_GroupToStyle"("A", "B")

CREATE INDEX "_GroupToStyle_B_index" ON "_GroupToStyle"("B")

ALTER TABLE "_BrandToGroup" ADD FOREIGN KEY("A")REFERENCES "Brand"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_BrandToGroup" ADD FOREIGN KEY("B")REFERENCES "groups"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_GroupToStyle" ADD FOREIGN KEY("A")REFERENCES "groups"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_GroupToStyle" ADD FOREIGN KEY("B")REFERENCES "Style"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201130185740-up..20201202180734-up
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -9,9 +9,9 @@
 }
 // datasource db {
 //   provider = "postgresql"
-//   url = "***"
+//   url = "***"
 // }
 model Account {
   id                 Int       @id @default(autoincrement())
@@ -84,10 +84,10 @@
   Notification Notification[]
   Battle       Battle[]
   BattleVote   BattleVote[]
   BattleJudge  Battle[]       @relation(name: "battleJudges")
+  Invite       Invite[]
   @@map(name: "users")
-  Invite Invite[]
 }
 model VerificationRequest {
   id         Int      @id @default(autoincrement())
@@ -157,8 +157,9 @@
   logo  String?
   desc  String?
   Item  Item[]
   style Style[]
+  Group Group[]
 }
 model Item {
   id        Int         @id @default(autoincrement())
@@ -216,8 +217,9 @@
   User        User[]
   Review      Review[]
   Collection  Collection[]
   Battle      Battle[]
+  Group       Group[]
 }
 model ItemLayer {
   id      Int    @id @default(autoincrement())
@@ -258,10 +260,11 @@
   slug        String
   description String
   inviteonly  Boolean  @default(true)
   public      Boolean  @default(false)
+  brands      Brand[]
+  tags        Style[]
-
   member     User[]       @relation("memberGroup")
   collection Collection[]
   Invite     Invite[]     @relation("inviteGroup")
```


